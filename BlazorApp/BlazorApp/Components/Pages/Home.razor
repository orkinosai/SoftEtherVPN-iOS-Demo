@page "/"
@using BlazorApp.Models
@inject AppConfiguration Config
@inject ApplicationSettings AppSettings
@inject EmailSettings EmailConfig
@inject BlobStorageSettings BlobConfig
@inject ApplicationInsightsSettings AIConfig
@inject DiagnosticsSettings DiagConfig

<PageTitle>@Config.ApplicationTitle</PageTitle>

<h1>@Config.ApplicationTitle</h1>

<div class="alert alert-info">
    <h4>Configuration Demonstration</h4>
    <p>This page displays configuration values loaded exclusively from <code>appsettings.json</code> files (environment variables are ignored).</p>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="card mb-3">
            <div class="card-header">
                <h5>Mock Data Settings</h5>
            </div>
            <div class="card-body">
                <p><strong>Use Mock Data:</strong> @Config.UseMockData</p>
                <p><strong>Accommodation Forms Enabled:</strong> @Config.MockDataSettings.AccommodationFormsEnabled</p>
                <p><strong>Max Forms Per User:</strong> @Config.MockDataSettings.MaxFormsPerUser</p>
                <p><strong>Default Location:</strong> @Config.MockDataSettings.DefaultLocation</p>
            </div>
        </div>
        
        <div class="card mb-3">
            <div class="card-header">
                <h5>Application Settings</h5>
            </div>
            <div class="card-body">
                <p><strong>Application Name:</strong> @AppSettings.ApplicationName</p>
                <p><strong>Application URL:</strong> @AppSettings.ApplicationUrl</p>
                <p><strong>Token Expiration:</strong> @AppSettings.TokenExpirationMinutes minutes</p>
                <p><strong>Token Length:</strong> @AppSettings.TokenLength</p>
            </div>
        </div>
        
        <div class="card mb-3">
            <div class="card-header">
                <h5>Email Settings</h5>
            </div>
            <div class="card-body">
                <p><strong>Company Email:</strong> @EmailConfig.CompanyEmail</p>
                <p><strong>From Email:</strong> @EmailConfig.FromEmail</p>
                <p><strong>From Name:</strong> @EmailConfig.FromName</p>
                <p><strong>SMTP Server:</strong> @EmailConfig.SmtpServer</p>
                <p><strong>SMTP Port:</strong> @EmailConfig.SmtpPort</p>
                <p><strong>SMTP Username:</strong> @EmailConfig.SmtpUsername</p>
                <p><strong>Use SSL:</strong> @EmailConfig.UseSsl</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card mb-3">
            <div class="card-header">
                <h5>Feature Flags</h5>
            </div>
            <div class="card-body">
                <p><strong>Enable Notifications:</strong> @Config.Features.EnableNotifications</p>
                <p><strong>Enable Reporting:</strong> @Config.Features.EnableReporting</p>
                <p><strong>Enable Advanced Search:</strong> @Config.Features.EnableAdvancedSearch</p>
            </div>
        </div>
        
        <div class="card mb-3">
            <div class="card-header">
                <h5>Blob Storage Settings</h5>
            </div>
            <div class="card-body">
                <p><strong>Container Name:</strong> @BlobConfig.ContainerName</p>
                <p><strong>Connection String:</strong> @(string.IsNullOrEmpty(BlobConfig.ConnectionString) ? "Not configured" : "[CONFIGURED]")</p>
            </div>
        </div>
        
        <div class="card mb-3">
            <div class="card-header">
                <h5>Application Insights</h5>
            </div>
            <div class="card-body">
                <p><strong>Mode:</strong> @AIConfig.Mode</p>
                <p><strong>Agent Version:</strong> @AIConfig.AgentExtensionVersion</p>
                <p><strong>Connection String:</strong> @(string.IsNullOrEmpty(AIConfig.ConnectionString) ? "Not configured" : "[CONFIGURED]")</p>
            </div>
        </div>
        
        <div class="card mb-3">
            <div class="card-header">
                <h5>Diagnostics Settings</h5>
            </div>
            <div class="card-body">
                <p><strong>Azure Blob Retention:</strong> @DiagConfig.AzureBlobRetentionInDays days</p>
                <p><strong>HTTP Logging Retention:</strong> @DiagConfig.WebsiteHttpLoggingRetentionDays days</p>
            </div>
        </div>
    </div>
</div>

<div class="mt-4">
    <div class="alert alert-success">
        <h6>Configuration Source Verification</h6>
        <p>All values above are loaded from <code>appsettings.json</code> and <code>appsettings.Development.json</code> files.</p>
        <p>Environment variables are explicitly ignored to ensure consistent configuration across all environments.</p>
        <p>Check the application logs to see the configuration loading details.</p>
    </div>
</div>
